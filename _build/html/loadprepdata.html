

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Loading and Preparing Data &mdash; sdcMicro GUI manual  documentation</title>
  

  
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Setup anonymization problem" href="setup.html" />
    <link rel="prev" title="Introduction to sdcApp" href="introsdcApp.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> sdcMicro GUI manual
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Table of contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation and updating</a></li>
<li class="toctree-l1"><a class="reference internal" href="introsdcApp.html">Introduction to sdcApp</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Loading and Preparing Data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#loading-data">Loading data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#testdata">Testdata</a></li>
<li class="toctree-l3"><a class="reference internal" href="#other-microdata">Other microdata</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#inspect-and-explore-data">Inspect and explore data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#preparing-data">Preparing data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#convert-variable-type">Convert variable type</a></li>
<li class="toctree-l3"><a class="reference internal" href="#set-specific-values-to-na">Set specific values to NA</a></li>
<li class="toctree-l3"><a class="reference internal" href="#modify-factor-variable">Modify factor variable</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-stratification-variable">Create stratification variable</a></li>
<li class="toctree-l3"><a class="reference internal" href="#reset-variables">Reset variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hierarchical-data">Hierarchical data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#use-subset-of-microdata">Use subset of microdata</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="setup.html">Setup anonymization problem</a></li>
<li class="toctree-l1"><a class="reference internal" href="risk.html">Risk measurement</a></li>
<li class="toctree-l1"><a class="reference internal" href="anon.html">Anonymization methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="utility.html">Utility measurement</a></li>
<li class="toctree-l1"><a class="reference internal" href="export.html">Export data and reports</a></li>
<li class="toctree-l1"><a class="reference internal" href="reproducibility.html">Reproducibility</a></li>
<li class="toctree-l1"><a class="reference internal" href="undo.html">Undo</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">sdcMicro GUI manual</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Loading and Preparing Data</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/loadprepdata.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="loading-and-preparing-data">
<h1>Loading and Preparing Data<a class="headerlink" href="#loading-and-preparing-data" title="Permalink to this headline">¶</a></h1>
<p>This section discusses how to load microdata into <em>sdcApp</em> and prepare the data
for the SDC process.</p>
<p>The first step in the SDC process is loading the dataset into <em>sdcApp</em>. <em>sdcApp</em> supports
most common statistical data formats, such as <em>R</em>, <em>STATA</em>, <em>SPSS</em> and <em>SAS</em> files. First time
users may also load one of the two practice datasets, which are included in <em>sdcApp</em>,
to explore <em>sdcApp</em> and methods. Most examples in this guide are illustrated by
using the practice dataset <em>testdata</em> and can be reproduced by using this dataset.</p>
<p>After loading the data, the user needs to prepare the data for the SDC process.
Most preparation steps can be carried out in <em>sdcApp</em>, although users may find it
more convenient to perform some of these actions in another statistical software
before loading the data in <em>sdcApp</em>.</p>
<div class="section" id="loading-data">
<h2>Loading data<a class="headerlink" href="#loading-data" title="Permalink to this headline">¶</a></h2>
<div class="section" id="testdata">
<h3>Testdata<a class="headerlink" href="#testdata" title="Permalink to this headline">¶</a></h3>
<p><em>sdcApp</em> includes two practice datasets: <em>testdata</em> and <em>testdata2</em>. The dataset
<em>testdata</em> is used to illustrate methods and examples in this guide. In order to
replicate these examples, the user needs to load this dataset. In order to load the testdata
dataset, navigate to the <strong>Microdata tab</strong> and select <strong>Testdata/Internal data</strong> in the left sidebar.
Select the dataset from the dropdown menu and click the button <strong>Load data</strong>.
This is illustrated in <a class="reference internal" href="#fig51"><span class="std std-numref">Fig. 14</span></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Any other datasets loaded in the current <em>R</em> session are also shown in the dropdown list
with available datasets and can be loaded.
<strong>Add screenshot of dropdown menu with mymicrodata</strong></p>
</div>
<p>After loading the dataset, the data is displayed in the <strong>Microdata</strong> tab. The <strong>Microdata</strong>
tab changes and the functionality for loading microdata is replaced with
functionality to explore and prepare the dataset (cf. <a class="reference internal" href="#fig52"><span class="std std-numref">Fig. 15</span></a>). The
left sidebar shows different options to explore and prepare the data for the anonymization process,
as discussed in the next sections.</p>
<p>After loading the testdata dataset, the loaded
dataset is displayed (cf. <a class="reference internal" href="#fig52"><span class="std std-numref">Fig. 15</span></a>). By default the first 20 records are displayed.
With the dropdown menu in the topleft corner it is possible to display 20, 50, 100 or all
records per page. It is not recommended to select <em>all</em> in case of larger datasets
<em>sdcApp</em> will run very slow. In the right bottom it is possible to navigate to different pages,
either by clicking <em>Next</em> or by clicking on a page number. The table
with the data is both horizontally and vertically scrollable with the scrollbars on the
right side and bottom of the table. To sort the data by a variable, click on the symbol
with two arrows (<img alt="sort" src="_images/prepLoadSort.png" /> or <img alt="sort2" src="_images/prepLoadSort2.png" />) next to the variable name in the header of the table.
The data is searchable by using the search bar on the right top of the table. Only records
with matches are displayed. The search is performed simultaneously on all variables.</p>
<div class="figure align-center" id="id1">
<span id="fig51"></span><img alt="_images/prepLoadTestdata.png" src="_images/prepLoadTestdata.png" />
<p class="caption"><span class="caption-number">Fig. 14 </span><span class="caption-text">Load testdata on <strong>Microdata</strong> tab</span></p>
</div>
<div class="figure align-center" id="id2">
<span id="fig52"></span><img alt="_images/prepLoadedData.png" src="_images/prepLoadedData.png" />
<p class="caption"><span class="caption-number">Fig. 15 </span><span class="caption-text">Loaded dataset</span></p>
</div>
</div>
<div class="section" id="other-microdata">
<h3>Other microdata<a class="headerlink" href="#other-microdata" title="Permalink to this headline">¶</a></h3>
<p><em>sdcApp</em> supports datasets in several foreign data formats (cf. <a class="reference internal" href="#tab51"><span class="std std-numref">Table 1</span></a>).
If the microdata is not in one of these data formats, another software can be used
to convert the data, such as <em>Stat/Transfer</em>. Also some statistical software allow to export
the data in another data format.</p>
<span id="tab51"></span><table border="1" class="colwidths-auto docutils align-center" id="id3">
<caption><span class="caption-number">Table 1 </span><span class="caption-text">Data formats compatible with sdcApp</span><a class="headerlink" href="#id3" title="Permalink to this table">¶</a></caption>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Software</th>
<th class="head">File extension</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>R/RStudio</td>
<td>.rdata</td>
</tr>
<tr class="row-odd"><td>SPSS</td>
<td>.sav</td>
</tr>
<tr class="row-even"><td>SAS</td>
<td>.sas7bdat</td>
</tr>
<tr class="row-odd"><td>CSV</td>
<td>.csv, .txt</td>
</tr>
<tr class="row-even"><td>STATA</td>
<td>.dta</td>
</tr>
</tbody>
</table>
<p>In order to load a dataset, select the corresponding data format
from the left sidebar of the Microdata tab. For all formats the user can set two options:</p>
<ol class="arabic simple">
<li><dl class="first docutils">
<dt>Convert string variables (character vectors) to factor variables?</dt>
<dd>If <code class="code docutils literal notranslate"><span class="pre">TRUE</span></code> (default), variables of type string are automatically converted to categorical variables
(type factor in <em>R</em>). Categorical variables need to be of type factor in <em>sdcApp</em>.
Remove any textual variables, such as ‘Specify other:’ variables before loading the
data. These variables are oftentimes not suitable for release and require long
computation times to be transformed to factor. IF <code class="code docutils literal notranslate"><span class="pre">FALSE</span></code></dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Drop variables with only missing values (NA)?</dt>
<dd>If <code class="code docutils literal notranslate"><span class="pre">TRUE</span></code> (default), variables that contain only missing values (<code class="code docutils literal notranslate"><span class="pre">NA</span></code> in <em>R</em>)
are removed upon loading the data. This does not cause any loss of information,
as these variabels do not contain information. However, variables with only
missing values can cause issues in <em>sdcApp</em>. If <code class="code docutils literal notranslate"><span class="pre">FALSE</span></code>, no variables are deleted.</dd>
</dl>
</li>
</ol>
<p>If the selected data format is a CSV-file, two additional options need to be specified:</p>
<ol class="arabic simple">
<li><dl class="first docutils">
<dt>Does the first row contain the variable names?</dt>
<dd>If <code class="code docutils literal notranslate"><span class="pre">TRUE</span></code>, the values in the first row are used as variable names. If
<code class="code docutils literal notranslate"><span class="pre">FALSE</span></code>, the variables names are set to V1, V2, V3, … in the order of
appearance in the dataset.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Field separator</dt>
<dd>The field separator in the csv file needs to be specified. Options are comma (,),
semicolon (;) and tab.</dd>
</dl>
</li>
</ol>
<p>After setting the options for the data upload, click on the button <strong>Browse</strong> to access
the file system in your computer and select the microdata file. The file is upload
immediately after selection. After loading the file, which may</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Set the additional options before selecting the datafile from your file system.
Upon selection after clicking <strong>Browse</strong>, the file is immediately loaded and settings
can no longer be changed. If the file was accidentally loaded before setting all
parameters, the file needs to be reloaded after first restting the microdata by
clicking <strong>Reset microdata</strong> in the left sidebar.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The default maximum file size in <em>sdcApp</em> is 50 MB. In order to upload larger files,
the maximum file size in MB needs to be specified upon launching <em>sdcApp</em>. This can
be achieved by specifying the argument <code class="code docutils literal notranslate"><span class="pre">maxRequestSize</span></code>:</p>
<div class="literal-block-wrapper last docutils container" id="id4">
<div class="code-block-caption"><span class="caption-number">Listing 5 </span><span class="caption-text">Launching <em>sdcApp</em> to load larger files</span><a class="headerlink" href="#id4" title="Permalink to this code">¶</a></div>
<div class="highlight-R notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># Launch sdcApp with increased max. file size (200MB)</span>
sdcApp<span class="p">(</span>maxRequestSize <span class="o">=</span> <span class="m">200</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="figure align-center" id="id5">
<span id="fig53"></span><img alt="_images/prepLoadData.png" src="_images/prepLoadData.png" />
<p class="caption"><span class="caption-number">Fig. 16 </span><span class="caption-text">Load data on Microdata tab - example STATA dataset</span></p>
</div>
<p>After loading the testdata dataset, the loaded
dataset is displayed (cf. <a class="reference internal" href="#fig52"><span class="std std-numref">Fig. 15</span></a>). By default the first 20 records are displayed.
With the dropdown menu in the topleft corner it is possible to display 20, 50, 100 or all
records per page. It is not recommended to select <em>all</em> in case of larger datasets
<em>sdcApp</em> will run very slow. In the right bottom it is possible to navigate to different pages,
either by clicking <em>Next</em> or by clicking on a page number. The table
with the data is both horizontally and vertically scrollable with the scrollbars on the
right side and bottom of the table. To sort the data by a variable, click on the symbol
with two arrows next to the variable name in the header of the table.</p>
<p>After loading the dataset, the data is shown in the <strong>Microdata</strong> tab. The <strong>Microdata</strong>
tab changes and the functionality for loading microdata is replaced with
functionality to explore and prepare the dataset (cf. <a class="reference internal" href="#fig511"><span class="std std-numref">Fig. 17</span></a>). The
left sidebar shows different options to explore and prepare the data for the anonymization process,
as discussed in the next sections.</p>
<div class="figure align-center" id="id6">
<span id="fig511"></span><img alt="_images/prepLoadAfterLoad.png" src="_images/prepLoadAfterLoad.png" />
<p class="caption"><span class="caption-number">Fig. 17 </span><span class="caption-text">Microdata tab after loading dataset</span></p>
</div>
</div>
</div>
<div class="section" id="inspect-and-explore-data">
<h2>Inspect and explore data<a class="headerlink" href="#inspect-and-explore-data" title="Permalink to this headline">¶</a></h2>
<p>After loading the dataset into <em>sdcApp</em>, the data is shown on the Microdata tab. At the top of
the data viewer, the number of observations and variables is shown as well as the number
of variables that were deleted as a result all missing values (cf. <a class="reference internal" href="#fig511"><span class="std std-numref">Fig. 17</span></a>).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If <em>Drop variables with only missing values (NA)?</em> is set to TRUE, the number of variables
shown may be lower than the number of variables in the loaded dataset.</p>
</div>
<p>It is important to check whether the data was imported completely and correctly by browsing
the dataset in <em>sdcApp</em>. If, for example, records are missing or labels are corrupted,
then these issues need to be fixed outside of <em>sdcApp</em> and the data need to be reimported.</p>
<p>By clicking <strong>Explore variables</strong> in the left sidebar, univariate and bivariate summary
statistics appropriate for the variable type can displayed. If one variable is selected,
univariate summary statistics are shown.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The choice of summary statistics is based on the variable type specified in <em>R</em> (shown in
brackets after the variable name, e.g., urbrur (integer)). Therefore,
the representation may not be correct, if the variable type does not correspond
with the variable content. By converting the variable (see <a class="reference internal" href="#convert-variable-type">Convert variable type</a>),
the correct summary statistics will be displayed.</p>
</div>
</div>
<div class="section" id="preparing-data">
<h2>Preparing data<a class="headerlink" href="#preparing-data" title="Permalink to this headline">¶</a></h2>
<p>Most datasets need to be prepared before the start of the anonymization process. Examples
of data preparation are removing variables that are not suitable for release, etc. It is
recommended to carry out the data preparation in a statistical software of choice, before
loading the data in sdcApp. Data preparation includes</p>
<p>After loading the data in sdcApp, still some steps may need to be carried, which are
specific to the needs of the sdcApp. These steps are discussed in the following subsections.</p>
<div class="section" id="convert-variable-type">
<h3>Convert variable type<a class="headerlink" href="#convert-variable-type" title="Permalink to this headline">¶</a></h3>
<p>numeric to factor</p>
<p>to numeric</p>
</div>
<div class="section" id="set-specific-values-to-na">
<h3>Set specific values to NA<a class="headerlink" href="#set-specific-values-to-na" title="Permalink to this headline">¶</a></h3>
<p>Missing values play an important role in anonymization of microdata. In particular when
measuring disclosure risk of categorical key variables (see <a href="#id11"><span class="problematic" id="id12">`Risk`__</span></a>). sdcApp only considers
the R missing value <code class="code docutils literal notranslate"><span class="pre">NA</span></code> as missing. Therefore, it is important to recode other missing values,
such as 9, 99, 998 or 999, “Missing”, “Not applicable” after loading the
data to the R missing value <code class="code docutils literal notranslate"><span class="pre">NA</span></code>, if appropriate. Many standard missing value codes
in the data, such as <code class="code docutils literal notranslate"><span class="pre">.</span></code> in STATA are automatically converted to NA upon loading
the data into <em>sdcApp</em>.</p>
<div class="figure align-center" id="id7">
<span id="fig57"></span><img alt="_images/prepareMissingToNA.png" src="_images/prepareMissingToNA.png" />
<p class="caption"><span class="caption-number">Fig. 18 </span><span class="caption-text">Screen to set specific value in a variable to NA</span></p>
</div>
</div>
<div class="section" id="modify-factor-variable">
<h3>Modify factor variable<a class="headerlink" href="#modify-factor-variable" title="Permalink to this headline">¶</a></h3>
<p>Recoding (see Recoding)</p>
</div>
<div class="section" id="create-stratification-variable">
<h3>Create stratification variable<a class="headerlink" href="#create-stratification-variable" title="Permalink to this headline">¶</a></h3>
<div class="figure align-center" id="id8">
<span id="fig58"></span><img alt="_images/prepStrataVariable.png" src="_images/prepStrataVariable.png" />
<p class="caption"><span class="caption-number">Fig. 19 </span><span class="caption-text">Screen to create new stratification variable</span></p>
</div>
</div>
<div class="section" id="reset-variables">
<h3>Reset variables<a class="headerlink" href="#reset-variables" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="hierarchical-data">
<h3>Hierarchical data<a class="headerlink" href="#hierarchical-data" title="Permalink to this headline">¶</a></h3>
<div class="figure align-center" id="id9">
<span id="fig59"></span><img alt="_images/prepHierarchical1.png" src="_images/prepHierarchical1.png" />
<p class="caption"><span class="caption-number">Fig. 20 </span><span class="caption-text">Screen to create household level dataset</span></p>
</div>
<div class="figure align-center" id="id10">
<span id="fig510"></span><img alt="_images/prepHierarchical2.png" src="_images/prepHierarchical2.png" />
<p class="caption"><span class="caption-number">Fig. 21 </span><span class="caption-text">Screen merge anonymized household level dataset with individual level dataset</span></p>
</div>
</div>
<div class="section" id="use-subset-of-microdata">
<h3>Use subset of microdata<a class="headerlink" href="#use-subset-of-microdata" title="Permalink to this headline">¶</a></h3>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="setup.html" class="btn btn-neutral float-right" title="Setup anonymization problem" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="introsdcApp.html" class="btn btn-neutral" title="Introduction to sdcApp" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Thijs Benschop, Matthew Welch.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>